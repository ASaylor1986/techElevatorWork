CREATE DATABASE wk5project;
DROP DATABASE wk5project;

START TRANSACTION;

CREATE TABLE employees
(
employeeId serial,
job_titleId integer NOT NULL,
first_name varchar(64) NOT NULL,
last_name varchar(64) NOT NULL,
gender varchar(16),
birthday date NOT NULL,
hire_date date NOT NULL,
departmentId integer NOT NULL,

CONSTRAINT pk_employees PRIMARY KEY (employeeId),
CONSTRAINT fk_employees_departments FOREIGN KEY (departmentId) REFERENCES departments (departmentId),
CONSTRAINT fk_employees_job_title FOREIGN KEY (job_titleId) REFERENCES job_title (job_titleId)
);



CREATE TABLE departments
(
departmentId int GENERATED BY DEFAULT AS IDENTITY,
name varchar(100) NOT NULL,

CONSTRAINT pk_departments PRIMARY KEY (departmentId)
);




CREATE TABLE projects
(
projectId integer NOT NULL,
name varchar(64) NOT NULL,
start_date date NOT NULL,
employee_number int GENERATED BY DEFAULT AS IDENTITY,

CONSTRAINT pk_projects PRIMARY KEY (projectId)
);




CREATE TABLE projects_employees
(
projectId integer NOT NULL,
employeeId serial,

CONSTRAINT pk_projects_employees PRIMARY KEY (projectId, employeeId),
CONSTRAINT fk_projects_employees_projects FOREIGN KEY (projectId) REFERENCES projects (projectId),
CONSTRAINT fk_projects_employees_employees FOREIGN KEY (employeeId) REFERENCES employees (employeeId)
);


CREATE TABLE job_title
(
job_titleId int GENERATED BY DEFAULT AS IDENTITY,
title varchar(64) NOT NULL,
CONSTRAINT pk_job_title PRIMARY KEY (job_titleId)
);

COMMIT TRANSACTION;



INSERT INTO departments (departmentId, name) VALUES (1, 'Internal Investigations');
INSERT INTO departments (departmentId, name) VALUES (2, 'Sales Force');
INSERT INTO departments (departmentId, name) VALUES (3, 'Compliance');
INSERT INTO departments (departmentId, name) VALUES (4, 'Accounts Receivable');

INSERT INTO projects (projectId, name, start_date) VALUES (1, 'Enemy Mole Takedown', current_date);
INSERT INTO projects (projectId, name, start_date) VALUES (2, 'Selling Candy To A Baby', current_date);
INSERT INTO projects (projectId, name, start_date) VALUES (3, 'Teamwork Makes the Dream Work', current_date);
INSERT INTO projects (projectId, name, start_date) VALUES (4, 'Real Estate Boom', current_date);


INSERT INTO job_title (job_titleId, title) VALUES (1, 'SUI Investigator');
INSERT INTO job_title (job_titleId, title) VALUES (2, 'Senior Sales Manager');
INSERT INTO job_title (job_titleId, title) VALUES (3, 'Business Manager');
INSERT INTO job_title (job_titleId, title) VALUES (4, 'Accounts Clerk');

INSERT INTO employees (employeeId, job_titleId, first_name, last_name, gender,  birthday, hire_date, departmentId) VALUES (1, 1, 'Ben', 'Phillips', 'Male', current_date, current_date, 1);
INSERT INTO employees (employeeId, job_titleId, first_name, last_name, gender, birthday, hire_date, departmentId) VALUES (2, 1, 'BJane', 'Cabusao', 'Female',current_date, current_date, 1);
INSERT INTO employees (employeeId, job_titleId, first_name, last_name, gender, birthday, hire_date, departmentId) VALUES (3, 2, 'Taryn', 'Triggs', 'Female',current_date, current_date,  1);
INSERT INTO employees (employeeId, job_titleId, first_name, last_name, gender, birthday, hire_date, departmentId) VALUES (4, 2, 'Emily', 'Downs', 'Female',current_date, current_date,  1);
INSERT INTO employees (employeeId, job_titleId, first_name, last_name, gender, birthday, hire_date, departmentId) VALUES (5, 4, 'Dillon', 'Hildreth', 'Male',current_date, current_date,  2);
INSERT INTO employees (employeeId, job_titleId, first_name, last_name, gender, birthday, hire_date, departmentId) VALUES (6, 4, 'Maze', 'Humphries', 'Female',current_date, current_date,  2);
INSERT INTO employees (employeeId, job_titleId, first_name, last_name, gender, birthday, hire_date, departmentId) VALUES (7, 3, 'Tommy', 'Strobes', 'Male',current_date, current_date,  3);
INSERT INTO employees (employeeId, job_titleId, first_name, last_name, gender, birthday, hire_date, departmentId) VALUES (8, 3, 'Mariana', 'Odyseus', 'Female',current_date, current_date,  3);


INSERT INTO projects_employees (projectId, employeeId) VALUES (1, 8);
INSERT INTO projects_employees (projectId, employeeId) VALUES (1, 7);
INSERT INTO projects_employees (projectId, employeeId) VALUES (2, 6);
INSERT INTO projects_employees (projectId, employeeId) VALUES (2, 5);
INSERT INTO projects_employees (projectId, employeeId) VALUES (3, 4);
INSERT INTO projects_employees (projectId, employeeId) VALUES (3, 3);
INSERT INTO projects_employees (projectId, employeeId) VALUES (4, 2);
INSERT INTO projects_employees (projectId, employeeId) VALUES (4, 1);
INSERT INTO projects_employees (projectId, employeeId) VALUES (4, 8);